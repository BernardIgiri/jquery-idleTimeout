!function(e){e.fn.idleTimeout=function(i){var t,o,n,l,a,s,r,d,c,g,u,m,v,f,p,T,y,L,w,b,A={idleTimeLimit:1200,redirectUrl:"/logout",customCallback:!1,activityEvents:"click keypress scroll wheel mousewheel mousemove",enableDialog:!0,dialogDisplayLimit:180,dialogTitle:"Session Expiration Warning",dialogText:"Because you have been inactive, your session is about to expire.",dialogTimeRemaining:"Time remaining",dialogStayLoggedInButton:"Stay Logged In",dialogLogOutNowButton:"Log Out Now",errorAlertMessage:'Please disable "Private Mode", or upgrade to a modern browser. Or perhaps a dependent file missing. Please see: https://github.com/marcuswestin/store.js',sessionKeepAliveTimer:600,sessionKeepAliveUrl:window.location.href},h=e.extend(A,i),I=2,D=document.title;return t=function(){n=function(){c===store.get("idleTimerLastActivity")&&e.get(h.sessionKeepAliveUrl)},l=setInterval(n,1e3*h.sessionKeepAliveTimer)},o=function(){clearInterval(l)},a=function(){e("body").on(h.activityEvents,function(){(!h.enableDialog||h.enableDialog&&y()!==!0)&&g()})},d=function(){var i=e.now(),t=store.get("idleTimerLastActivity")+1e3*h.idleTimeLimit;i>t?h.enableDialog?h.enableDialog&&y()!==!0&&(m(),p()):b():store.get("idleTimerLoggedOut")===!0?b():y()===!0&&(L(),T())},g=function(){u(),c=e.now(),store.set("idleTimerLastActivity",c),s=setInterval(d,1e3*I)},u=function(){clearInterval(s)},m=function(){var i="<div id='idletimer_warning_dialog'><p>"+h.dialogText+"</p><p style='display:inline'>"+h.dialogTimeRemaining+": <div style='display:inline' id='countdownDisplay'></div></p></div>";e(i).dialog({buttons:[{text:h.dialogStayLoggedInButton,click:function(){L(),T(),g()}},{text:h.dialogLogOutNowButton,click:function(){b()}}],closeOnEscape:!1,modal:!0,title:h.dialogTitle,open:function(){e(this).closest(".ui-dialog").find(".ui-dialog-titlebar-close").hide()}}),w(),document.title=h.dialogTitle,h.sessionKeepAliveTimer&&o()},f=function(){var i=e.now(),t=store.get("idleTimerLastActivity")+1e3*h.idleTimeLimit+1e3*h.dialogDisplayLimit;(i>t||store.get("idleTimerLoggedOut")===!0)&&b()},p=function(){v=setInterval(f,1e3*I)},T=function(){clearInterval(v),clearInterval(r)},y=function(){var i=e("#idletimer_warning_dialog").is(":visible");return i===!0?!0:!1},L=function(){e("#idletimer_warning_dialog").dialog("destroy").remove(),document.title=D,h.sessionKeepAliveTimer&&t()},w=function(){var i,t,o=h.dialogDisplayLimit;r=setInterval(function(){i=Math.floor(o/60),10>i&&(i="0"+i),t=o-60*i,10>t&&(t="0"+t),e("#countdownDisplay").html(i+":"+t),o-=1},1e3)},b=function(){store.set("idleTimerLoggedOut",!0),h.sessionKeepAliveTimer&&o(),h.customCallback&&h.customCallback(),h.redirectUrl&&(window.location.href=h.redirectUrl)},this.each(function(){store.enabled?(c=e.now(),store.set("idleTimerLastActivity",c),store.set("idleTimerLoggedOut",!1)):alert(h.errorAlertMessage),a(),h.sessionKeepAliveTimer&&t(),g()})}}(jQuery);