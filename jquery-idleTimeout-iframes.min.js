!function(e){e.fn.idleTimeout=function(i){var t,n,o,l,a,r,s,d,c,g,u,m,v,f,p,y,T,L,w,h,b,A,I={idleTimeLimit:1200,redirectUrl:"/logout",customCallback:!1,activityEvents:"click keypress scroll wheel mousewheel mousemove",enableDialog:!0,dialogDisplayLimit:180,dialogTitle:"Session Expiration Warning",dialogText:"Because you have been inactive, your session is about to expire.",dialogTimeRemaining:"Time remaining",dialogStayLoggedInButton:"Stay Logged In",dialogLogOutNowButton:"Log Out Now",errorAlertMessage:'Please disable "Private Mode", or upgrade to a modern browser. Or perhaps a dependent file missing. Please see: https://github.com/marcuswestin/store.js',sessionKeepAliveTimer:600,sessionKeepAliveUrl:window.location.href},E=e.extend(I,i),O=2,D=document.title;return t=function(){o=function(){d===store.get("idleTimerLastActivity")&&e.get(E.sessionKeepAliveUrl)},setInterval(o,1e3*E.sessionKeepAliveTimer)},n=function(){clearInterval(o)},l=function(){e("body").on(E.activityEvents,function(){y()!==!0&&c()})},s=function(){var i=e.now(),t=store.get("idleTimerLastActivity")+1e3*E.idleTimeLimit;i>t?E.enableDialog?E.enableDialog&&y()!==!0&&(u(),f()):w():store.get("idleTimerLoggedOut")===!0?w():y()===!0&&(T(),p())},c=function(){g(),d=e.now(),store.set("idleTimerLastActivity",d),a=setInterval(s,1e3*O)},g=function(){clearInterval(a)},u=function(){var i="<div id='idletimer_warning_dialog'><p>"+E.dialogText+"</p><p style='display:inline'>"+E.dialogTimeRemaining+": <div style='display:inline' id='countdownDisplay'></div></p></div>";e(i).dialog({buttons:[{text:E.dialogStayLoggedInButton,click:function(){T(),p(),c()}},{text:E.dialogLogOutNowButton,click:function(){w()}}],closeOnEscape:!1,modal:!0,title:E.dialogTitle,open:function(){e(this).closest(".ui-dialog").find(".ui-dialog-titlebar-close").hide()}}),L(),document.title=E.dialogTitle,E.sessionKeepAliveTimer&&n()},v=function(){var i=e.now(),t=store.get("idleTimerLastActivity")+1e3*E.idleTimeLimit+1e3*E.dialogDisplayLimit;(i>t||store.get("idleTimerLoggedOut")===!0)&&w()},f=function(){m=setInterval(v,1e3*O)},p=function(){clearInterval(m),clearInterval(r)},y=function(){var i=e("#idletimer_warning_dialog").is(":visible");return i===!0?!0:!1},T=function(){e("#idletimer_warning_dialog").dialog("destroy").remove(),document.title=D,E.sessionKeepAliveTimer&&t()},L=function(){var i,t,n=E.dialogDisplayLimit;r=setInterval(function(){i=Math.floor(n/60),10>i&&(i="0"+i),t=n-60*i,10>t&&(t="0"+t),e("#countdownDisplay").html(i+":"+t),n-=1},1e3)},w=function(){store.set("idleTimerLoggedOut",!0),E.sessionKeepAliveTimer&&n(),E.customCallback&&E.customCallback(),E.redirectUrl&&(window.location.href=E.redirectUrl)},h=function(){var e,i;e=function(){"complete"===document.readyState&&(clearInterval(i),b())},i=setInterval(e,1e3)},b=function(){var e,i,t=document.getElementsByTagName("iframe");if(t.length>0)for(e=0;e<t.length;e++)i=t.item(e),i.attachEvent?i.attachEvent("onload",A(e)):i.addEventListener("load",A(e),!1)},A=function(i){var t=e("iframe:eq("+i+")").contents().find("html");t.on(E.activityEvents,function(i){e("body").trigger(i)})},this.each(function(){store.enabled?(d=e.now(),store.set("idleTimerLastActivity",d),store.set("idleTimerLoggedOut",!1)):alert(E.errorAlertMessage),l(),E.sessionKeepAliveTimer&&t(),c(),h()})}}(jQuery);