<!DOCTYPE html>
<html>

	<head>
		<meta http-equiv="X-UA-Compatible" content="text/html; charset=UTF-8" />
		<title>Jquery-idleTimeout - Demo Page - by JillElaine</title>

		<link type="text/css" rel="stylesheet" href="stylesheets/main.css"/>
		<link type="text/css" rel="stylesheet" href="stylesheets/jquery-ui-1.8.21.custom.css"/>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js" type="text/javascript"></script>
		<script src="https://raw.githubusercontent.com/marcuswestin/store.js/master/store.min.js" type="text/javascript"></script>
		<script src="https://raw.githubusercontent.com/JillElaine/jquery-idleTimeout/master/jquery-idleTimeout.min.js" type="text/javascript"></script>

		<script type="text/javascript" charset="utf-8">
		  var eventList = 'click keypress scroll wheel mousewheel'; // separate each event with a space

      $(document).ready(function(){
        $(document).idleTimeout({
          idleTimeLimit: 10000,         // 10 seconds
          dialogDisplayLimit: 30000,   // Time to display the warning dialog before redirect (and optional callback) in milliseconds
          redirectUrl: 'https://github.com/JillElaine/jquery-idleTimeout',       // redirect to this url
          activityEvents: eventList, // separate each event with a space
          sessionKeepAliveTimer: false, // Set to false to disable pings.
        });

        $('body').on(eventList, function(event) {
            $('#parent_activity').effect('shake');
        });
      });

      // this function is called by the 'onload' event of the iframe
      function iframe_onload() {
        var iframe = $('iframe').contents().find('html');
        // Bubble events from child iframe to parent page
        iframe.on(eventList, function(event) {
            $('#child_activity').effect('shake');
            $('body').trigger(event);
        });
      };
		</script>
	</head>

	<body>
	  <div>
	    <div class="main_banner">
	      <h1>Jquery-idleTimeout - iFrame Demo - Parent</h1>
	    </div>

	    <div class="main_content">

        <h2>GitHub Project Page - <a href="https://github.com/JillElaine/jquery-idleTimeout">https://github.com/JillElaine/jquery-idleTimeout</a></h2>

        <p>This page demonstrates the 'bubbling' of activity events from the iframe to the main parent page. Events that are detected are clicks, keypresses, and wheel scrolling.</p>

        <p>To see idle timeout functionality, do not press any keys, click your mouse or scroll your mousewheel for 10 seconds.</p>

        <h3>Activity Detector</h3>

        <div id="parent_activity" style="background-color:yellow;border:solid 1px black;width: 50%"><h4>Parent Activity</h4></div>

        <p></p>

        <div id="child_activity" style="background-color: orange;border:solid 1px black;width: 50%"><h4>Child Iframe Activity</h4></div>

        <p>Child iFrame loaded below</p>

        <iframe src="iframe-test-child.html" id="testIframe" onload="iframe_onload()" style="border:3px solid #AB4A0E;">
        </iframe>

      </div>
	  </div>
	</body>
</html>